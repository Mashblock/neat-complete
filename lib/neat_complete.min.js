// Generated by CoffeeScript 1.3.1
/**
  * Copyright 2012 Able Technology
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  * http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
*/((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};window.NeatComplete||(window.NeatComplete={}),NeatComplete.addDomEvent=function(a,b,c){return a.attachEvent!=null?(a["e"+b+c]=c,a[""+b+c]=function(){return a["e"+b+c](window.event)},a.attachEvent("on"+b,a[""+b+c])):a.addEventListener(b,c,!1)},window.NeatComplete||(window.NeatComplete={}),NeatComplete.Service=function(){function b(b,c,d,e){var f=this;this.widget=b,this.name=c,this.search_fn=d,this.options=e!=null?e:{},this._response=a(this._response,this),this.results=[],this.response=function(a,b){return f._response.apply(f,arguments)}}return b.name="Service",b.prototype.search=function(a){return this.last_query=a,this.search_fn(a,this.response)},b.prototype._response=function(a,b){this.results=[];if(this.last_query===a)return this.results=b,this.widget.showResults()},b}(),window.NeatComplete||(window.NeatComplete={}),NeatComplete.Widget=function(){function a(a,b){this.element=a,this.options=b!=null?b:{},typeof console!="undefined"&&console!==null&&console.log(this.element),this.services=[],this._addListeners()}return a.name="Widget",a.prototype.addService=function(a,b){return this.services.push(new NeatComplete.Service(this,a,b))},a.prototype._addListeners=function(){var a=this;return NeatComplete.addDomEvent(this.element,"keypress",function(b){var c;c=b.which||b.keyCode;if(c===13)return a.selectHighlighted(),b.preventDefault?b.preventDefault():b.returnValue=!1,!1}),NeatComplete.addDomEvent(this.element,"keydown",function(b){var c;c=b.which||b.keyCode;switch(c){case 38:return a._moveHighlight(-1),!1;case 40:return a._moveHighlight(1),!1;case 9:if(a._highlighted!=null)return a._selectHighlighted();break;case 27:return a._removeSuggestions();case 37:case 39:case 13:break;default:return a._timeout!=null&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){return a._getSuggestions()},400)}})},a.prototype._moveHighlight=function(a){return typeof console!="undefined"&&console!==null?console.log("Stepped: "+a):void 0},a.prototype._selectHighlighted=function(){return typeof console!="undefined"&&console!==null?console.log("Selected"):void 0},a.prototype._getSuggestions=function(){return this._val=this.element.value,typeof console!="undefined"&&console!==null?console.log(this._val):void 0},a}()})).call(this);